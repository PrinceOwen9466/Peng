import{w as T,r as G}from"./index.BugdNo2c.js";import{w as Q,x as R,y as j}from"./scheduler.CHjRdnVi.js";const Z=T(void 0);function ae(e,t){const{computePosition:i,autoUpdate:s,offset:f,shift:r,flip:n,arrow:l,size:u,autoPlacement:d,hide:w,inline:E}=Q(Z),c={open:!1,autoUpdateCleanup:()=>{}},M=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let y;const h="https://www.skeleton.dev/utilities/popups";let o,L;function U(){o=document.querySelector(`[data-popup="${t.target}"]`)??document.createElement("div"),L=o.querySelector(".arrow")??document.createElement("div")}U();function S(){var p,v,$,D,C,g,F,O;if(!o)throw new Error(`The data-popup="${t.target}" element was not found. ${h}`);if(!i)throw new Error(`Floating UI 'computePosition' not found for data-popup="${t.target}". ${h}`);if(!f)throw new Error(`Floating UI 'offset' not found for data-popup="${t.target}". ${h}`);if(!r)throw new Error(`Floating UI 'shift' not found for data-popup="${t.target}". ${h}`);if(!n)throw new Error(`Floating UI 'flip' not found for data-popup="${t.target}". ${h}`);if(!l)throw new Error(`Floating UI 'arrow' not found for data-popup="${t.target}". ${h}`);const a=[];u&&a.push(u((p=t.middleware)==null?void 0:p.size)),d&&a.push(d((v=t.middleware)==null?void 0:v.autoPlacement)),w&&a.push(w(($=t.middleware)==null?void 0:$.hide)),E&&a.push(E((D=t.middleware)==null?void 0:D.inline)),i(e,o,{placement:t.placement??"bottom",middleware:[f(((C=t.middleware)==null?void 0:C.offset)??8),r(((g=t.middleware)==null?void 0:g.shift)??{padding:8}),n((F=t.middleware)==null?void 0:F.flip),l(((O=t.middleware)==null?void 0:O.arrow)??{element:L||null}),...a]}).then(({x:W,y:H,placement:J,middlewareData:X})=>{if(Object.assign(o.style,{left:`${W}px`,top:`${H}px`}),L){const{x:q,y:_}=X.arrow,B={top:"bottom",right:"left",bottom:"top",left:"right"}[J.split("-")[0]];Object.assign(L.style,{left:q!=null?`${q}px`:"",top:_!=null?`${_}px`:"",right:"",bottom:"",[B]:"-4px"})}})}function b(){o&&(c.open=!0,t.state&&t.state({state:c.open}),S(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),c.autoUpdateCleanup=s(e,o,S),y=Array.from(o==null?void 0:o.querySelectorAll(M)))}function m(a){if(!o)return;const p=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{c.open=!1,t.state&&t.state({state:c.open}),o.style.opacity="0",o.setAttribute("inert",""),c.autoUpdateCleanup&&c.autoUpdateCleanup(),a&&a()},p)}function k(){c.open===!1?b():m()}function x(a){if(c.open===!1||e.contains(a.target))return;if(o&&o.contains(a.target)===!1){m();return}const p=t.closeQuery===void 0?"a[href], button":t.closeQuery;if(p==="")return;const v=o==null?void 0:o.querySelectorAll(p);v==null||v.forEach($=>{$.contains(a.target)&&m()})}const z=a=>{if(c.open===!1)return;const p=a.key;if(p==="Escape"){a.preventDefault(),e.focus(),m();return}y=Array.from(o==null?void 0:o.querySelectorAll(M)),c.open&&document.activeElement===e&&(p==="ArrowDown"||p==="Tab")&&M.length>0&&y.length>0&&(a.preventDefault(),y[0].focus())};switch(t.event){case"click":e.addEventListener("click",k,!0),window.addEventListener("click",x,!0);break;case"hover":e.addEventListener("mouseover",b,!0),e.addEventListener("mouseleave",()=>m(),!0);break;case"focus-blur":e.addEventListener("focus",k,!0),e.addEventListener("blur",()=>m(),!0);break;case"focus-click":e.addEventListener("focus",b,!0),window.addEventListener("click",x,!0);break;default:throw new Error(`Event value of '${t.event}' is not supported. ${h}`)}return window.addEventListener("keydown",z,!0),S(),{update(a){m(()=>{t=a,S(),U()})},destroy(){e.removeEventListener("click",k,!0),e.removeEventListener("mouseover",b,!0),e.removeEventListener("mouseleave",()=>m(),!0),e.removeEventListener("focus",k,!0),e.removeEventListener("focus",b,!0),e.removeEventListener("blur",()=>m(),!0),window.removeEventListener("click",x,!0),window.removeEventListener("keydown",z,!0)}}}const K="modalStore";function se(){const e=j(K);if(!e)throw new Error("modalStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function ue(){const e=N();return R(K,e)}function N(){const{subscribe:e,set:t,update:i}=T([]);return{subscribe:e,set:t,update:i,trigger:s=>i(f=>(f.push(s),f)),close:()=>i(s=>(s.length>0&&s.shift(),s)),clear:()=>t([])}}const ee={message:"Missing Toast Message",autohide:!0,timeout:5e3},Y="toastStore";function ce(){const e=j(Y);if(!e)throw new Error("toastStore is not initialized. Please ensure that `initializeStores()` is invoked in the root layout file of this app!");return e}function le(){const e=ne();return R(Y,e)}function te(){const e=Math.random();return Number(e).toString(32)}function ne(){const{subscribe:e,set:t,update:i}=T([]),s=r=>i(n=>{if(n.length>0){const l=n.findIndex(d=>d.id===r),u=n[l];u&&(u.callback&&u.callback({id:r,status:"closed"}),u.timeoutId&&clearTimeout(u.timeoutId),n.splice(l,1))}return n});function f(r){if(r.autohide===!0)return setTimeout(()=>{s(r.id)},r.timeout)}return{subscribe:e,close:s,trigger:r=>{const n=te();return i(l=>{r&&r.callback&&r.callback({id:n,status:"queued"}),r.hideDismiss&&(r.autohide=!0);const u={...ee,...r,id:n};return u.timeoutId=f(u),l.push(u),l}),n},freeze:r=>i(n=>(n.length>0&&clearTimeout(n[r].timeoutId),n)),unfreeze:r=>i(n=>(n.length>0&&(n[r].timeoutId=f(n[r])),n)),clear:()=>t([])}}const I={};function P(e){return e==="local"?localStorage:sessionStorage}function A(e,t,i){const s=(i==null?void 0:i.serializer)??JSON,f=(i==null?void 0:i.storage)??"local";function r(n,l){P(f).setItem(n,s.stringify(l))}if(!I[e]){const n=T(t,d=>{const w=P(f).getItem(e);w&&d(s.parse(w));{const E=c=>{c.key===e&&d(c.newValue?s.parse(c.newValue):null)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)}}),{subscribe:l,set:u}=n;I[e]={set(d){r(e,d),u(d)},update(d){const w=d(Q(n));r(e,w),u(w)},subscribe:l}}return I[e]}A("modeOsPrefers",!1);A("modeUserPrefers",void 0);A("modeCurrent",!1);const V="(prefers-reduced-motion: reduce)";function oe(){return window.matchMedia(V).matches}const de=G(oe(),e=>{{const t=s=>{e(s.matches)},i=window.matchMedia(V);return i.addEventListener("change",t),()=>{i.removeEventListener("change",t)}}});export{le as a,ce as b,ae as c,se as g,ue as i,de as p,Z as s};
